# Filesystem MCP 설치 및 연동 가이드

## 개요
MCP (Model Context Protocol)의 filesystem 서버를 설치하고 Claude Desktop과 연동하는 과정을 단계별로 설명합니다.

## 사전 요구사항
- Claude Desktop 앱이 설치되어 있어야 함
- Node.js와 npm이 설치되어 있어야 함

## 1단계: Filesystem MCP 서버 설치

### npm을 통한 전역 설치
```bash
npm install -g @modelcontextprotocol/server-filesystem
```

### 또는 npx를 사용한 실행 (설치 없이)
```bash
# 설치 없이 직접 실행하는 방법도 있음 (설정에서 npx 사용)
```

## 2단계: Claude Desktop 설정 파일 위치 확인

### macOS
```bash
~/Library/Application Support/Claude/claude_desktop_config.json
```

### Windows
```bash
%APPDATA%\Claude\claude_desktop_config.json
```

### Linux
```bash
~/.config/Claude/claude_desktop_config.json
```

## 3단계: 설정 파일 편집

설정 파일(`claude_desktop_config.json`)을 열어서 다음과 같이 설정합니다:

```json
{
  "mcpServers": {
    "filesystem": {
      "command": "node",
      "args": [
        "/usr/local/lib/node_modules/@modelcontextprotocol/server-filesystem/dist/index.js"
      ],
      "env": {
        "HOME": "/Users/your-username"
      }
    }
  }
}
```

### npx를 사용하는 경우
```json
{
  "mcpServers": {
    "filesystem": {
      "command": "npx",
      "args": [
        "-y",
        "@modelcontextprotocol/server-filesystem",
        "/path/to/allowed/directory"
      ]
    }
  }
}
```

## 4단계: 권한 및 경로 설정

### 특정 디렉토리 접근 허용
```json
{
  "mcpServers": {
    "filesystem": {
      "command": "npx",
      "args": [
        "-y",
        "@modelcontextprotocol/server-filesystem",
        "/Users/your-username/Documents",
        "/Users/your-username/Projects"
      ]
    }
  }
}
```

### 읽기 전용 모드 설정
```json
{
  "mcpServers": {
    "filesystem": {
      "command": "npx",
      "args": [
        "-y",
        "@modelcontextprotocol/server-filesystem",
        "--readonly",
        "/Users/your-username/Documents"
      ]
    }
  }
}
```

## 5단계: Claude Desktop 재시작

1. Claude Desktop 완전히 종료
2. Claude Desktop 다시 실행
3. MCP 연결 상태 확인

## 6단계: 연결 확인

Claude Desktop에서 다음과 같이 테스트해보세요:

```
파일 시스템에 접근해서 내 Documents 폴더의 파일 목록을 보여줘
```

## 문제해결

### 일반적인 오류와 해결방법

**오류 1: "MCP server not found"**
```bash
# npm 전역 설치 경로 확인
npm list -g --depth=0 | grep filesystem

# 또는 which 명령으로 경로 확인
which node
```

**오류 2: 권한 오류**
- 설정 파일에서 올바른 디렉토리 경로 확인
- 해당 디렉토리에 대한 읽기/쓰기 권한 확인

**오류 3: JSON 구문 오류**
- JSON 문법 검증: [jsonlint.com](https://jsonlint.com)
- 쉼표, 괄호 등 구문 확인

## 고급 설정 예시

### 여러 MCP 서버와 함께 사용
```json
{
  "mcpServers": {
    "filesystem": {
      "command": "npx",
      "args": [
        "-y",
        "@modelcontextprotocol/server-filesystem",
        "/Users/your-username/Projects"
      ]
    },
    "git": {
      "command": "npx",
      "args": [
        "-y", 
        "@modelcontextprotocol/server-git",
        "--repository",
        "/Users/your-username/Projects"
      ]
    }
  }
}
```

## 보안 고려사항

1. **최소 권한 원칙**: 필요한 디렉토리만 접근 허용
2. **읽기 전용 모드**: 가능한 경우 `--readonly` 플래그 사용
3. **민감한 디렉토리 제외**: 시스템 폴더나 개인정보가 있는 폴더 제외

## 유용한 명령어

### MCP 서버 상태 확인
```bash
# Claude Desktop 로그 확인 (macOS)
tail -f ~/Library/Logs/Claude/claude_desktop.log
```

### 설정 파일 백업
```bash
cp ~/Library/Application\ Support/Claude/claude_desktop_config.json ~/claude_config_backup.json
```

이제 Claude Desktop에서 파일 시스템에 접근할 수 있습니다!
